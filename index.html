<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ayuda P'urhépecha - Español</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Simple scrollbar styling */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 6px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto max-w-2xl p-4 min-h-screen flex flex-col">
        <!-- Encabezado de la Aplicación -->
        <header class="text-center my-6">
            <h1 class="text-4xl font-bold text-emerald-700">Jorhenguarhikua P'urhépecha</h1>
            <p class="text-lg text-gray-600 mt-2">Ayuda P'urhépecha - Español</p>
        </header>

        <!-- Barra de Búsqueda -->
        <div class="relative mb-6">
            <input type="text" id="searchInput" placeholder="Buscar palabra o frase..."
                   class="w-full px-4 py-3 border border-gray-300 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 transition">
            <div class="absolute inset-y-0 right-0 flex items-center pr-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-search text-gray-400" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                </svg>
            </div>
        </div>

        <!-- Filtros por Categoría -->
        <div id="categoryFilters" class="mb-6 flex flex-wrap justify-center gap-2">
            <!-- Las categorías se insertarán aquí dinámicamente -->
        </div>

        <!-- Contenedor de Resultados -->
        <main id="resultsContainer" class="flex-grow bg-white p-4 rounded-xl shadow-md overflow-y-auto">
            <!-- Las palabras y frases se insertarán aquí -->
        </main>
        
        <!-- Pie de página con advertencia -->
        <footer class="text-center mt-6">
            <p class="text-xs text-gray-500">
                <strong>Nota:</strong> La pronunciación de voz es una aproximación generada por computadora y puede no ser exacta.
            </p>
        </footer>

    </div>

    <script>
        const dictionary = [
            // Saludos
            { purhepecha: 'Nájki, ¿nómbe úsï?', espanol: 'Hola, ¿cómo estás?', categoria: 'Saludos' },
            { purhepecha: 'Jorhenguarhikua', espanol: 'Gracias', categoria: 'Saludos' },
            { purhepecha: 'Diósï meiamu', espanol: 'Buenos días / Buenas tardes', categoria: 'Saludos' },
            { purhepecha: 'P’orhépari jásï', espanol: 'Buenas noches', categoria: 'Saludos' },

            // Frases
            { purhepecha: '¿Nómbe jirejtki?', espanol: '¿Cómo te llamas?', categoria: 'Frases' },
            { purhepecha: 'Juchiti anapu jirej...', espanol: 'Mi nombre es...', categoria: 'Frases' },
            { purhepecha: '¿Nómbe anapueski?', espanol: '¿De dónde eres?', categoria: 'Frases' },
            { purhepecha: '¿Nómbe xáni?', espanol: '¿Cuánto cuesta?', categoria: 'Frases' },
            { purhepecha: 'Ásï jantontskani', espanol: 'Vamos a comer', categoria: 'Frases' },

            // Números
            { purhepecha: 'Ma', espanol: 'Uno', categoria: 'Números' },
            { purhepecha: 'Tsimani', espanol: 'Dos', categoria: 'Números' },
            { purhepecha: 'Tanimo', espanol: 'Tres', categoria: 'Números' },
            { purhepecha: 'T\'ámu', espanol: 'Cuatro', categoria: 'Números' },
            { purhepecha: 'Iúmu', espanol: 'Cinco', categoria: 'Números' },
            { purhepecha: 'Kuímu', espanol: 'Seis', categoria: 'Números' },
            
            // Familia
            { purhepecha: 'Nana', espanol: 'Mamá', categoria: 'Familia' },
            { purhepecha: 'Tata', espanol: 'Papá', categoria: 'Familia' },
            
            // General
            { purhepecha: 'P\'urhépecha', espanol: 'P\'urhépecha', categoria: 'General' },
            { purhepecha: 'Juchari anapu', espanol: 'Nuestra fuerza', categoria: 'General' },
            
            // Verbos
            { purhepecha: 'Tsïpésïni', espanol: 'Vivir', categoria: 'Verbos' },
            
            // Adjetivos
            { purhepecha: 'K\'éri', espanol: 'Grande', categoria: 'Adjetivos' },
            { purhepecha: 'Sési jásï', espanol: 'Está muy bonito / a', categoria: 'Adjetivos' },
            
            // Naturaleza
            { purhepecha: 'Janikua', espanol: 'Lluvia', categoria: 'Naturaleza' },
            
            // Sentimientos
            { purhepecha: 'Uékperakua', espanol: 'Amor', categoria: 'Sentimientos' },
            { purhepecha: 'Uékasïnga', espanol: 'Te quiero / Te amo', categoria: 'Sentimientos' },
            
            // Cultura
            { purhepecha: 'Pirekua', espanol: 'Canto / Canción', categoria: 'Cultura' },
            
            // Comida
            { purhepecha: 'Kurucha', espanol: 'Pescado', categoria: 'Comida' },
            { purhepecha: 'Corunda', espanol: 'Corunda (platillo)', categoria: 'Comida' },
            
            // Animales
            { purhepecha: 'Uitsïki', espanol: 'Colibrí', categoria: 'Animales' },
            
            // Personas
            { purhepecha: 'Achati', espanol: 'Señor / Hombre', categoria: 'Personas' },
            { purhepecha: 'Uarhi', espanol: 'Mujer', categoria: 'Personas' }
        ];

        // Elementos del DOM
        const searchInput = document.getElementById('searchInput');
        const categoryFilters = document.getElementById('categoryFilters');
        const resultsContainer = document.getElementById('resultsContainer');

        // Función para renderizar las palabras en el contenedor
        function renderWords(wordArray) {
            resultsContainer.innerHTML = '';
            if (wordArray.length === 0) {
                resultsContainer.innerHTML = '<p class="text-center text-gray-500">No se encontraron resultados.</p>';
                return;
            }
            wordArray.forEach(word => {
                const card = document.createElement('div');
                card.className = 'flex items-center justify-between p-3 border-b border-gray-200 last:border-b-0 hover:bg-gray-50 rounded-lg transition-colors duration-200';
                card.innerHTML = `
                    <div>
                        <p class="font-semibold text-lg text-emerald-800">${word.purhepecha}</p>
                        <p class="text-gray-600">${word.espanol}</p>
                    </div>
                    <button class="speak-btn p-2 rounded-full hover:bg-emerald-100 active:bg-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400" data-text="${word.purhepecha}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-volume-up-fill text-emerald-600" viewBox="0 0 16 16">
                            <path d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-1.414 1.414A6.472 6.472 0 0 1 12.025 8a6.472 6.472 0 0 1-1.903 4.596l1.414 1.414z"/>
                            <path d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-1.414 1.414A4.486 4.486 0 0 1 10.025 8a4.486 4.486 0 0 1-1.318 3.182l1.414 1.414zM8.707 11.182A4.486 4.486 0 0 0 10.025 8a4.486 4.486 0 0 0-1.318-3.182L7.293 6.23A2.486 2.486 0 0 1 8.025 8a2.486 2.486 0 0 1-.732 1.77l1.414 1.414zM2 8a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 8zm11.5 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5z"/>
                            <path d="M6 11.5a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H6.5a.5.5 0 0 1-.5-.5zM3 4.75a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75z"/>
                            <path d="M4.543 11.354a.5.5 0 0 1 .012.704l-.707.707a.5.5 0 0 1-.719-.693l.707-.707a.5.5 0 0 1 .707-.011zM1 8a1 1 0 0 1 1-1h2.586l3.207-3.207a1 1 0 0 1 1.414 0L10 5.586V2.5a1 1 0 0 1 2 0v11a1 1 0 0 1-2 0v-3.086l-1.793-1.793a1 1 0 0 1-1.414 0L3.586 9H2a1 1 0 0 1-1-1zm6.5 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 1 0v-1a.5.5 0 0 0-.5-.5z"/>
                        </svg>
                    </button>
                `;
                resultsContainer.appendChild(card);
            });
        }
        
        // Función para renderizar los botones de categoría
        function renderCategories() {
            const categories = ['Mostrar todo', ...new Set(dictionary.map(item => item.categoria))];
            categories.forEach(category => {
                const button = document.createElement('button');
                button.className = 'category-btn px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-colors';
                button.textContent = category;
                button.dataset.category = category;
                categoryFilters.appendChild(button);
            });
        }
        
        // Función para hablar el texto
        function speak(text) {
            if ('speechSynthesis' in window) {
                // Detener cualquier locución anterior
                window.speechSynthesis.cancel();

                const utterance = new SpeechSynthesisUtterance(text);
                // Usamos 'es-MX' como la aproximación más cercana disponible en navegadores estándar.
                utterance.lang = 'es-MX'; 
                utterance.pitch = 1;
                utterance.rate = 0.9;
                utterance.volume = 1;
                window.speechSynthesis.speak(utterance);
            } else {
                alert('Tu navegador no soporta la síntesis de voz.');
            }
        }

        // Función para manejar los filtros y la búsqueda
        function filterAndRender() {
            const searchTerm = searchInput.value.toLowerCase();
            const activeCategory = document.querySelector('.category-btn.active')?.dataset.category;

            let filteredWords = dictionary;
            
            // Filtrar por categoría
            if (activeCategory && activeCategory !== 'Mostrar todo') {
                filteredWords = filteredWords.filter(word => word.categoria === activeCategory);
            }

            // Filtrar por término de búsqueda
            if (searchTerm) {
                filteredWords = filteredWords.filter(word => 
                    word.purhepecha.toLowerCase().includes(searchTerm) || 
                    word.espanol.toLowerCase().includes(searchTerm)
                );
            }

            renderWords(filteredWords);
        }

        // Event Listeners
        searchInput.addEventListener('input', filterAndRender);
        
        categoryFilters.addEventListener('click', (e) => {
            if (e.target.classList.contains('category-btn')) {
                // Quitar clase activa de otros botones
                document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active', 'bg-emerald-600', 'text-white', 'border-emerald-600'));
                // Añadir clase activa al botón presionado
                e.target.classList.add('active', 'bg-emerald-600', 'text-white', 'border-emerald-600');
                filterAndRender();
            }
        });

        resultsContainer.addEventListener('click', (e) => {
            const speakButton = e.target.closest('.speak-btn');
            if (speakButton) {
                const textToSpeak = speakButton.dataset.text;
                speak(textToSpeak);
            }
        });

        // Carga inicial
        document.addEventListener('DOMContentLoaded', () => {
            renderCategories();
            document.querySelector('.category-btn[data-category="Mostrar todo"]').click(); // Activar "Mostrar todo" por defecto
        });

    </script>
</body>
</html>

